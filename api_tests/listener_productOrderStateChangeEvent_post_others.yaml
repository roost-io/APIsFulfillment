# ********RoostGPT********

# Test generated by RoostGPT for test artillerysequence using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# Test generated for /listener/productOrderStateChangeEvent_post for http method type POST in artillery framework
# RoostTestHash=2d6da3d389
# 
# 

# ********RoostGPT********
config:
  target: "{{ $processEnvironment.API_HOST }}"
  phases:
  - duration: 10
    arrivalRate: 1
  plugins:
    expect: {}
  payload:
    path: "listener_productOrderStateChangeEvent_post_others.csv"
    fields:
    - "subscriberId"
    - "date"
    - "associatedDocument"
    - "code"
    - "correlationOrder"
    - "description"
    - "id"
    skipHeader: true
    delimiter: "^|^"
  environments:
    development:
      target: "{{ $processEnvironment.AUTH_TOKEN }}"

scenarios:
- name: "Test Scenario: Non-Success API Responses"
  flow:
  - log: "Invalid Payload Test"
  - post:
      url: "/incorrect/url"
      headers:
        Content-Type: "application/json"
        Authorization: "Bearer {{ $processEnvironment.AUTH_TOKEN }}"
      json:
        notification:
          customer:
            subscriberId: "{{ subscriberId }}"
          date: "{{ date }}"
          order:
            associatedDocument: "{{ associatedDocument }}"
            code: "{{ code }}"
            correlationOrder: "{{ correlationOrder }}"
            description: "{{ description }}"
            id: "{{ id }}"
  - expect:
      - statusCode: 400
  - think: 1
  - log: "Authentication Issues Test"
  - post:
      url: "/listener/productOrderStateChangeEvent"
      headers:
        Content-Type: "application/json"
        Authorization: "IncorrectToken"
      json:
        notification:
          customer:
            subscriberId: "{{ subscriberId }}"
          date: "{{ date }}"
          order:
            associatedDocument: "{{ associatedDocument }}" 
            code: "{{ code }}"
            correlationOrder: "{{ correlationOrder }}"
            description: "{{ description }}"
            id: "{{ id }}"
  - expect:
      - statusCode: 401
  - think: 1
