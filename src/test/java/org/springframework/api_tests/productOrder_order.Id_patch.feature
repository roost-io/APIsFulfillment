# ********RoostGPT********

# Test generated by RoostGPT for test fflive using AI Type Open AI and AI Model gpt-4-turbo
# 
# Feature file generated for /productOrder/{order.Id}_patch for http method type PATCH 
# RoostTestHash=baabcd7d73
# 
# 

# ********RoostGPT********
Feature: Patch Product Order By Id

  Background:
    * def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http://localhost:8080')
    * url urlBase
    * def authToken = karate.properties['AUTH_TOKEN']
    * header Authorization = 'Bearer ' + authToken

  Scenario Outline: Update product order with valid data
    Given path '<order_Id>'
    And request 
    """
    <requestBody>
    """
    When method patch
    Then status 200
    And match response == 
    """
    <expectedResponse>
    """

    Examples:
      | order_Id         | requestBody                                                                                                          | expectedResponse                                           |
      | '20230315000001' | { "order": { "correlationOrder": "10", "associatedDocument": "VTT001", "type": "Instalacao", "infraType": "FTTH" } } | { "type": "S", "message": "Order updated", "code": "200" } |
      | '20230315000002' | { "order": { "correlationOrder": "11", "associatedDocument": "VTT002", "type": "Bloqueio", "infraType": "FTTP" } }   | { "type": "S", "message": "Order updated", "code": "200" } |

  Scenario: Attempt to update product order with invalid authorization
    Given path '20230315000001'
    And request 
    """
    { "order": { "correlationOrder": "10", "associatedDocument": "VTT001", "type": "Bloqueio", "infraType": "FTTH" } }
    """
    And header Authorization = 'Bearer invalid_token'
    When method patch
    Then status 401
    And match response == 
    """
    { "type": "E", "message": "Unauthorized", "code": "401" }
    """

  Scenario: Update product order with not found order ID
    Given path '20230315999999'
    And request 
    """
    { "order": { "correlationOrder": "99", "associatedDocument": "VTT099", "type": "Desbloqueio", "infraType": "FTTH" } }
    """
    When method patch
    Then status 404
    And match response == 
    """
    { "type": "E", "message": "Not Found", "code": "404" }
    """

  Scenario: Update product order with invalid request body
    Given path '20230315000001'
    And request 
    """
    { "order": { "correlationOrder": "10", "associatedDocument": "VTT001", "type": "InvalidType", "infraType": "FTTH" } }
    """
    When method patch
    Then status 400
    And match response == 
    """
    { "type": "E", "message": "Bad Request", "code": "400" }
    """
