# ********RoostGPT********

# Test generated by RoostGPT for test apiFulfillment using AI Type Claude AI and AI Model claude-3-opus-20240229
# 
# Feature file generated for /listener/productOrderInformationRequiredEvent_post for http method type POST 
# RoostTestHash=e74b642c2e
# 
# 

# ********RoostGPT********
Feature: Product Order Information Required Event API

  Background:
    * def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http://localhost:4010')
    * url urlBase
    * def authToken = karate.properties['AUTH_TOKEN']
    * configure headers = { 'Authorization': '#(authToken)' }

  Scenario Outline: Product Order Information Required Event - <description>
    Given path '/listener/productOrderInformationRequiredEvent'
    And request
      """
      {
        "notification": {
          "date": "<date>",
          "customer": {
            "subscriberId": "<subscriberId>"
          },
          "order": {
            "id": "<orderId>",
            "correlationOrder": "<correlationOrder>",
            "associatedDocument": "<associatedDocument>",
            "issue": {
              "code": "<issueCode>",
              "description": "<issueDescription>",
              "type": "<issueType>",
              "observation": "<issueObservation>",
              "updateDate": "<issueUpdateDate>",
              "action": "<issueAction>",
              "task": "<issueTask>",
              "fieldActivity": "<issueFieldActivity>",
              "reason": "<issueReason>"
            },
            "type": "<orderType>",
            "code": "<orderCode>",
            "description": "<orderDescription>",
            "lostEquipment": "<lostEquipment>",
            "resource": {
              "gponAccess": "<gponAccess>",
              "devices": {
                "device": [
                  {
                    "category": "<deviceCategory>",
                    "type": "<deviceType>",
                    "description": "<deviceDescription>",
                    "state": "<deviceState>",
                    "usageState": "<deviceUsageState>",
                    "startOperatingDate": "<deviceStartOperatingDate>",
                    "resourceCharacteristic": [
                      {
                        "name": "<resourceCharacteristicName>",
                        "value": "<resourceCharacteristicValue>"
                      }
                    ]
                  }
                ]
              },
              "fiberPath": {
                "items": {
                  "item": [
                    {
                      "name": "<fiberPathItemName>",
                      "value": "<fiberPathItemValue>"
                    }
                  ]
                }
              }
            }
          }
        }
      }
      """
    When method POST
    Then status <expectedStatus>
    And match header Content-Type contains 'application/json'
    And match response == <expectedResponse>

    Examples:
      | read('listener_productOrderInformationRequiredEvent_post.csv') |

  Scenario: Invalid Issue Code
    Given path '/listener/productOrderInformationRequiredEvent'
    And request
      """
      {
        "notification": {
          "date": "2023-04-01T10:00:00Z",
          "customer": {
            "subscriberId": "123456789"
          },
          "order": {
            "id": "20230401000001",
            "correlationOrder": "20",
            "associatedDocument": "VTT002",
            "issue": {
              "code": "9999",
              "description": "Invalid Issue Code",
              "type": "CLIENTE",
              "observation": "Invalid code",
              "updateDate": "2023-04-01T10:00:00Z",
              "action": "abrir",
              "task": "Task1",
              "fieldActivity": "True",
              "reason": "REASON1"
            },
            "code": "-1",
            "description": "O Equipamento já está em uso por outro cliente",
            "lostEquipment": "True",
            "resource": {
              "gponAccess": "GPON001",
              "devices": {
                "device": [
                  {
                    "category": "CAT1",
                    "type": "TYPE1",
                    "description": "Device 1",
                    "state": "ACTIVE",
                    "usageState": "IN_USE",
                    "startOperatingDate": "2023-04-01T10:00:00Z",
                    "resourceCharacteristic": [
                      {
                        "name": "CHAR1",
                        "value": "VALUE1"
                      }
                    ]
                  }
                ]
              },
              "fiberPath": {
                "items": {
                  "item": [
                    {
                      "name": "PATH1",
                      "value": "VALUE1"
                    }
                  ]
                }
              }
            }
          }
        }
      }
      """
    When method POST
    Then status 400
    And match response == {"error":"Invalid issue code"}

  Scenario: Missing Required Fields
    Given path '/listener/productOrderInformationRequiredEvent'
    And request
      """
      {
        "notification": {
          "date": "2023-04-02T11:00:00Z",
          "order": {
            "id": "20230402000001"
          }
        }
      }
      """
    When method POST
    Then status 400
    And match response == {"error":"Missing required fields"}
